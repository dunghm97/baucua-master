var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var S=(e,t,s)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,B=(e,t)=>{for(var s in t||(t={}))te.call(t,s)&&S(e,s,t[s]);if(G)for(var s of G(t))se.call(t,s)&&S(e,s,t[s]);return e},R=(e,t)=>Z(e,ee(t));var E=(e,t,s)=>(S(e,typeof t!="symbol"?t+"":t,s),s);import{l as w,c as ae,d as ne,u as oe,a as N,r as ie,b as le,e as u,w as ce,o as r,f as _,g as n,h as d,n as T,s as P,t as g,m as re,i as ue,F as A,j as D,k as F,T as j,p as M,q as de,v as pe,x as _e,y as V,z as me,A as O,B as he,C as ve}from"./vendor.7eeb0228.js";const be=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};be();class I{constructor(t,s,a){E(this,"id");E(this,"name");E(this,"avatar");E(this,"point");this.id=t,this.name=s,this.avatar=a,this.point=20}}const v="WAITING_FOR_BET",k="WAITING_FOR_ROLL",C="ROLLING",x="FINISHED";function y(e,t){return e+Math.floor(Math.random()*(1+t-e))}function fe(){return w.exports.range(3).map(()=>y(1,6))}function Ee(e,t){if(e.length<t*t)return e.sort((s,a)=>a.point-s.point).slice(0,t);for(let s=0;s<t;s++)for(let a=e.length-1;a>=1;a--)if(e[a].point>e[a-1].point){const o=e[a];e[a]=e[a-1],e[a-1]=o}return e.slice(0,t)}const ge="",ye="",Be=async e=>{const t=e.filter(s=>s.id&&s.name&&s.avatar).sort((s,a)=>a.point-s.point);await fetch(ge+"/score",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:ye,newScore:t})})},$=new Audio("./../src/assets/dice-roll.mp3");$.volume=1;const U=4;let W=[];const Ae={leaderboard:e=>{if(e.status===x||e.status===v){const t=Object.values(e.players);W=Ee(t,8)}return W},gameStatus:e=>{switch(e.status){case v:return"S\xD2NG \u0110ANG M\u1EDE. \u0110\u1EB7t \u0111i b\xE0 con \u01A1i!";case k:return"S\xD2NG \u0110ANG \u0110\xD3NG. Ch\u1EDD l\u1EAFc b\u1EA7u cua \u0111\xEA!";case C:return"L\u1EAEC L\u1EAEC L\u1EAEC. B\u1EA7u cua t\xF4m c\xE1";case x:return"L\u1EAEC XONG R\u1ED2I. H\u1ED1t ti\u1EC1n h\u1ED1t ti\u1EC1n!";default:return""}}},H=ae({state:{players:{},status:v,dices:[1,2,3],board:{1:{},2:{},3:{},4:{},5:{},6:{}}},mutations:{updateDice:(e,t)=>{e.dices=t},changeStatus:(e,t)=>{e.status=t},addPlayer:(e,t)=>{e.players[t.id]=t},updatePlayerPoint:(e,{playerId:t,changedValue:s})=>{const a=e.players[t];a&&(a.point+=s)},placeBet:(e,{player:t,bet:s,choice:a})=>{const o={id:t.id,name:t.name,avatar:t.avatar,bet:s};e.board[a][t.id]=o},removeLosers:e=>{for(const t of Object.keys(e.board)){const s=parseInt(t,10);e.dices.includes(s)||(e.board[s]={})}},clearBoard:e=>{for(const t of Object.keys(e.board))e.board[parseInt(t,10)]={}}},actions:{async rollDice({commit:e}){e("changeStatus",C),$.play(),await ne(2300);const t=fe();e("updateDice",t)},placeBet({commit:e,state:t},{player:s,bet:a,choice:o}){if(t.status!==v||(t.players[s.id]||e("addPlayer",s),t.board[o][s.id]))return;const i=t.players[s.id];if(i.point===0)return;let l=a;i.point<l&&(l=i.point),e("placeBet",{player:i,bet:l,choice:o}),e("updatePlayerPoint",{playerId:i.id,changedValue:-l})},closeBet({commit:e}){e("changeStatus",k)},finishGame({commit:e,state:t}){e("removeLosers");var s=w.exports.countBy(t.dices,a=>a);for(const a in s){const o=s[a]+1,i=Object.values(t.board[parseInt(a,10)]);for(const l of i)e("updatePlayerPoint",{playerId:l.id,changedValue:l.bet*o})}e("changeStatus",x),Be(Object.values(t.players))},randomBet({dispatch:e}){const t=new I("1","Hoang","https://pickaface.net/gallery/avatar/unr_emilee_180112_2136_x9pmt.png"),s=new I("2","Minh","https://pickaface.net/gallery/avatar/unr_jamal_180112_2132_x9i2f.png"),a=new I("3","Long","https://pickaface.net/gallery/avatar/unr_biba_180112_2131_2kdzozc.png");e("placeBet",{player:t,bet:5,choice:1}),e("placeBet",{player:s,bet:2,choice:3}),e("placeBet",{player:s,bet:5,choice:2}),e("placeBet",{player:a,bet:5,choice:2})},async playGame({dispatch:e}){await e("rollDice"),e("finishGame")},restart({commit:e,state:t}){e("clearBoard");for(const s of Object.values(t.players))s.point<U&&e("updatePlayerPoint",{playerId:s.id,changedValue:U-s.point});e("changeStatus",v)}},getters:Ae});function De(){return oe()}var Ie="/assets/baucua.f1bc4082.jpg";const xe=["src"],z=N({props:{number:null,isRolling:{type:Boolean}},setup(e){const t=e,s=["1-cop","2-bau","3-ga","4-tom","5-ca","6-cua"],a=ie({displayNum:t.number}),o=le(0),i=u(()=>`./src/assets/${s[a.displayNum-1]}.jpg`),l=u(()=>({"animated wobble infinite":t.isRolling}));return ce(()=>t.isRolling,m=>{m?o.value=setInterval(()=>{a.displayNum=y(1,6)},150):(o.value&&(clearInterval(o.value),o.value=0),a.displayNum=t.number)}),(m,L)=>(r(),_("div",{class:T(["dice",d(l)])},[n("img",{src:d(i)},null,8,xe)],2))}});var q=(e,t)=>{const s=e.__vccOpts||e;for(const[a,o]of t)s[a]=o;return s};const Se={class:"point"},Ne=["src"],Oe=N({props:{id:null,name:null,avatar:null,bet:null},setup(e){const t={left:y(10,80)+"%",top:y(10,80)+"%",transform:`rotate(${y(-60,60)}deg)`};return(s,a)=>a[0]||(P(-1),a[0]=n("div",{class:"token",style:t},[n("span",Se,g(e.bet),1),n("img",{src:e.avatar,class:"avatar"},null,8,Ne)]),P(1),a[0])}});var J=q(Oe,[["__scopeId","data-v-2efe18b9"]]);const b=e=>(de("data-v-37e40695"),e=e(),pe(),e),ke={class:"container is-fullhd"},Ce={class:"columns"},Le={class:"column is-8"},Ge={class:"columns"},Re={class:"column is-5"},we={class:"column is-7 content"},Te={class:"buttons"},Pe=["disabled"],Fe=b(()=>n("span",{class:"icon"},[n("i",{class:"mdi mdi-close-box-outline"})],-1)),je=O(" \xA0 \u0110\xD3NG S\xD2NG "),Me=[Fe,je],Ve=["disabled"],$e=b(()=>n("span",{class:"icon"},[n("i",{class:"mdi mdi-dice-multiple"})],-1)),Ue=O(" \xA0 L\u1EAEC B\u1EA6U CUA "),We=[$e,Ue],He=["disabled"],ze=b(()=>n("span",{class:"icon"},[n("i",{class:"mdi mdi-cards-playing-outline"})],-1)),qe=O(" \xA0 M\u1EDE S\xD2NG "),Je=[ze,qe],Ke={class:"bc-table"},Xe=b(()=>n("img",{src:Ie,alt:"baucua",class:"image bc-image"},null,-1)),Qe={class:"bc-overlay"},Ye={class:"column is-4"},Ze=_e('<div class="content" data-v-37e40695><h3 class="is-medium" data-v-37e40695>Lu\u1EADt ch\u01A1i (Vui l\xE0 ch\xEDnh)</h3><ul data-v-37e40695><li data-v-37e40695> M\u1EDBi ch\u01A1i \u0111\u01B0\u1EE3c t\u1EB7ng <b data-v-37e40695>20 \u0111\u1ED3ng</b></li><li data-v-37e40695> M\u1ED7i l\u1EA7n ch\xE1y t\xFAi s\u1EBD \u0111\u01B0\u1EE3c t\u1EB7ng <b data-v-37e40695>4 \u0111\u1ED3ng</b> \u0111\u1EC3 g\u1EE1 g\u1EA1c </li><li data-v-37e40695> \u0110\u1EB7t c\u01B0\u1EE3c b\u1EB1ng c\xE1ch <b data-v-37e40695>comment s\u1ED1 l\u01B0\u1EE3ng v\xE0 l\u1EF1a ch\u1ECDn</b>: <i data-v-37e40695>2 cua, 4 b\u1EA7u, 3 c\u1ECDp</i></li><li data-v-37e40695>\u0110\u1EB7t r\u1ED3i kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EB7t l\u1EA1i (v\xEC tui ch\u01B0a code)</li><li data-v-37e40695> Tra s\u1ED1 \u0111i\u1EC3m t\u1EA1i <a href="https://bit.ly/baucuadao" data-v-37e40695>bit.ly/baucuadao</a></li></ul></div>',1),et={class:"content"},tt=b(()=>n("h3",{class:"is-medium"},"B\u1EA3ng x\u1EBFp h\u1EA1ng",-1)),st={class:"table is-striped is-narrow"},at=b(()=>n("thead",null,[n("tr",null,[n("th",null,"H\u1EA1ng"),n("th",null,"Avatar"),n("th",null,"T\xEAn"),n("th",null,"\u0110i\u1EC3m")])],-1)),nt=["src"],ot={name:"app",methods:B({},re(["playGame","closeBet","randomBet","restart"])),computed:B({},ue(["leaderboard","gameStatus"])),data(){return{}},components:{dice:z,token:J}},it=N(R(B({},ot),{setup(e){const t=De(),s=u(()=>t.state.dices),a=u(()=>t.state.board),o=u(()=>t.state.status),i=u(()=>o.value!==v),l=u(()=>o.value!==k),m=u(()=>o.value!==x),L=u(()=>o.value===C);return(p,h)=>(r(),_("div",ke,[n("div",Ce,[n("div",Le,[n("div",Ge,[n("div",Re,[(r(!0),_(A,null,D(d(s),(c,f)=>(r(),V(z,{key:f,isRolling:d(L),number:c},null,8,["isRolling","number"]))),128))]),n("div",we,[n("div",null,[n("h3",{class:T(["is-medium",{"has-text-info":d(o)==="WAITING_FOR_BET"}])},g(p.gameStatus),3)]),n("div",Te,[n("button",{onClick:h[0]||(h[0]=(...c)=>p.closeBet&&p.closeBet(...c)),class:"button is-danger",disabled:d(i)},Me,8,Pe),n("button",{onClick:h[1]||(h[1]=(...c)=>p.playGame&&p.playGame(...c)),class:"button is-primary",disabled:d(l)},We,8,Ve),n("button",{onClick:h[2]||(h[2]=(...c)=>p.restart&&p.restart(...c)),class:"button is-warning",disabled:d(m)},Je,8,He)])])]),n("div",null,[n("div",Ke,[Xe,n("div",Qe,[(r(!0),_(A,null,D(d(a),(c,f)=>(r(),_("div",{class:"boards",key:f},[F(j,{tag:"div","enter-active-class":"animated bounceInDown","leave-active-class":"animated fadeOutDown"},{default:M(()=>[(r(!0),_(A,null,D(c,(X,Q)=>(r(),V(J,me({key:Q},X),null,16))),128))]),_:2},1024)]))),128))])])])]),n("div",Ye,[Ze,n("div",et,[tt,n("table",st,[at,F(j,{name:"flip-list","enter-active-class":"animated slideInRight","leave-active-class":"animated slideOutRight",tag:"tbody"},{default:M(()=>[(r(!0),_(A,null,D(p.leaderboard,(c,f)=>(r(),_("tr",{key:c.id},[n("td",null,g(f+1),1),n("td",null,[n("img",{class:"avatar",src:c.avatar},null,8,nt)]),n("td",null,g(c.name),1),n("td",null,g(c.point),1)]))),128))]),_:1})])])])])]))}}));var lt=q(it,[["__scopeId","data-v-37e40695"]]);const K=he("http://localhost:3002");K.on("connect",()=>{console.log("connected")});K.on("newBet",function(e){const{id:t,name:s,avatar:a,bet:o,choice:i}=e,m={player:new I(t,s,a),bet:o,choice:i};H.dispatch("placeBet",m)});ve(lt).use(H).mount("#app");
